<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password</title>
    <link rel="stylesheet" href="forgotpassword.css" />
    <script defer src="forgotpassword.js"></script>
  </head>
  <body>
    <div class="container">
      <h2>Forgot Password</h2>

      <!-- Request Reset Section -->
      <div id="requestResetSection">
        <p>Enter your email to receive a password reset link:</p>
        <input
          type="email"
          id="emailInput"
          placeholder="Enter your email"
          required
        />
        <button id="requestResetBtn" onclick="requestPasswordReset()">
          Request Reset
        </button>
        <p id="requestResetMessage"></p>
      </div>

      <!-- Reset Password Section (Visible only when token is in URL) -->
      <div id="resetPasswordSection" style="display: none">
        <p>Enter your new password:</p>
        <input
          type="password"
          id="newPasswordInput"
          placeholder="New password"
          required
        />
        <button id="resetPasswordBtn" onclick="resetPassword()">
          Reset Password
        </button>
        <p id="resetPasswordMessage"></p>
      </div>

      <!-- Back to Login -->
      <p>
        Remember your password?
        <a href="login.html" id="backToLoginLink">Back to Login</a>
      </p>
    </div>

    <script>
      // Check if the reset token is in the URL and show the reset password section
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has("token")) {
        document.getElementById("requestResetSection").style.display = "none";
        document.getElementById("resetPasswordSection").style.display = "block";
      }
    </script>
  </body>
</html>
